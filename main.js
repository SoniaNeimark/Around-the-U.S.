!function(){"use strict";class e{constructor(e,t,s){this._items=e,this._container=document.querySelector(s),this._renderer=t}renderItems(){this._items.reverse().forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}function t(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class s{constructor(e,s,r,o,i,a){t(this,"isOwner",(()=>this.cardObj.owner._id==this._myId)),t(this,"hasLike",(e=>e._id==this._myId)),t(this,"_checkLikes",(()=>this.cardObj.likes.length>0&&this.cardObj.likes.some((e=>this.hasLike(e))))),t(this,"getCardId",(()=>this.cardObj._id)),t(this,"updateLikes",(e=>{this.likesNumber.textContent=e.likes.length})),t(this,"deleteCard",(()=>{this._card.remove()})),t(this,"hasId",(()=>this._myId)),t(this,"isLiked",(()=>this._buttonLike.classList.contains(this._props.buttonLikeActiveClass))),t(this,"addLike",(()=>{this._buttonLike.classList.add(this._props.buttonLikeActiveClass)})),t(this,"removeLike",(()=>{this._buttonLike.classList.remove(this._props.buttonLikeActiveClass)})),this.cardObj=e,this._title=this.cardObj.name,this._url=this.cardObj.link,this._myId=s,this._props=r,this._handleCardClick=o,this._handleDelete=i,this._handleLike=a}_getTemplate(){return document.querySelector(this._props.cardTemplateSelector).content.querySelector(this._props.cardSelector).cloneNode(!0)}generateCard(){return this._card=this._getTemplate(),this._cardTitle=this._card.querySelector(this._props.cardTitleSelector),this._cardImage=this._card.querySelector(this._props.cardImageSelector),this._buttonDelete=this._card.querySelector(this._props.buttonDeleteSelector),this._buttonLike=this._card.querySelector(this._props.buttonLikeSelector),this.likesNumber=this._card.querySelector(this._props.cardLikesNumberSelector),this._cardTitle.textContent=this._title,this._cardImage.alt=this._title,this._cardImage.src=this._url,this.cardId=this.cardObj._id,this.updateLikes(this.cardObj),this._checkLikes()&&this.addLike(),this.isOwner()&&this._buttonDelete.classList.add(this._props.buttonDeleteActiveClass),this._setEventListeners(),this._card}_setEventListeners(){this._buttonDelete.addEventListener("click",this._handleDelete),this._buttonLike.addEventListener("click",this._handleLike),this._cardImage.addEventListener("click",this._handleCardClick)}}class r{constructor(e,t){this._formElement=document.querySelector(t),this._data=e,this._inputElements=Array.from(this._formElement.querySelectorAll(this._data.inputSelector)),this._buttonElement=this._formElement.querySelector(this._data.submitButtonSelector)}_showInputError(e){e.classList.add(this._data.inputErrorClass),this._errorText=this._formElement.querySelector("".concat(this._data.errorHiddenSelector,"_").concat(e.id)),this._errorText.textContent=e.validationMessage,this._errorText.classList.add(this._data.errorClass)}_hideInputError(e){e.classList.remove(this._data.inputErrorClass),this._errorText=this._formElement.querySelector("".concat(this._data.errorHiddenSelector,"_").concat(e.id)),this._errorText.textContent="",this._errorText.classList.remove(this._data.errorClass)}_checkIfInvalid(e){return!e.validity.valid}_hasInvalidInput(){return this._inputElements.some(this._checkIfInvalid)}_activateButton(){this._buttonElement.classList.remove(this._data.inactiveButtonClass),this._buttonElement.removeAttribute("disabled")}_deactivateButton(){this._buttonElement.classList.add(this._data.inactiveButtonClass),this._buttonElement.setAttribute("disabled",!0)}_setButtonState(){this._hasInvalidInput()?this._deactivateButton():this._activateButton()}_checkInputValidity(e){this._checkIfInvalid(e)?this._showInputError(e):this._hideInputError(e)}validateForm(){this._setButtonState(),this._inputElements.forEach((e=>{this._checkInputValidity(e)}))}resetValidation(){this._deactivateButton(),this._inputElements.forEach((e=>{this._hideInputError(e)}))}enableValidation(){this._inputElements.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._setButtonState()}))}))}}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class i{constructor(e,t){o(this,"_handleEscClose",(e=>{"Escape"==e.key&&this.close()})),o(this,"_handleClickClose",(e=>{e.target!=this._popup&&e.target!=this._buttonClose||this.close()})),this._data=e,this._popup=document.querySelector(t),this._buttonClose=this._popup.querySelector(this._data.buttonCloseSelector)}open(){this._popup.classList.add(this._data.popupOpenClass),this.setEventListeners()}close(){this._popup.classList.remove(this._data.popupOpenClass),this.removeEventListeners()}setEventListeners(){this._popup.addEventListener("click",this._handleClickClose),document.addEventListener("keydown",this._handleEscClose)}removeEventListeners(){this._popup.removeEventListener("click",this._handleClickClose),document.removeEventListener("keydown",this._handleEscClose)}}class a extends i{constructor(e,t,s){super(e,t),this._form=this._popup.querySelector("form"),this.handleSubmit=s,this._inputElements=Array.from(this._popup.querySelectorAll(this._data.inputSelector))}getInputValues(){return this._formValues={},this._inputElements.forEach((e=>this._formValues[e.name]=e.value)),this._formValues}close(){super.close(),this._form.reset()}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",this.handleSubmit)}removeEventListeners(){super.removeEventListeners(),this._form.removeEventListener("submit",this.handleSubmit)}}document.getElementById("logo").src="4e8e0a1d604782a0dff8.svg";const n={buttonLikeSelector:".like-button",buttonDeleteSelector:".delete-button",buttonCloseSelector:".close-button",buttonLikeActiveClass:"like-button_status_active",buttonDeleteActiveClass:"delete-button_visible",popupSelector:".popup-box",popupSubtitleSelector:".popup-box__subtitle",popupImageImageSelector:".popup-box__image",popupOpenClass:"popup-box_opened",cardsGallerySelector:".elements__cards",cardTemplateSelector:"#elements__card",cardSelector:".elements__card",cardImageSelector:".elements__image",cardTitleSelector:".elements__title",cardLikesNumberSelector:".elements__like-number",userNameSetSelector:".profile__name",userJobSetSelector:".profile__profession",profileImageSelector:".profile__image",buttonEditProfileSelector:".edit-button",buttonAddCardSelector:".add-button",avatarEditButtonSelector:".avatar-edit-button",buttonSubmitAlertSelector:".popup-box__button_alert",profileEditSubmitButtonSelector:".popup-box__button_edit-profile",addCardSubmitButtonSelector:".popup-box__button_add-card",avatarEditSubmitButtonSelector:".popup-box__button_edit-avatar",popupEditProfileSelector:".popup-box_edit-profile",popupEditAvatarSelector:".popup-box_edit-avatar",popupAddCardSelector:".popup-box_add-card",popupImageSelector:".popup-box_image",popupAlertSelector:".popup-box_alert",userNameToSetSelector:".popup-box__input_type_name",userJobToSetSelector:".popup-box__input_type_job",userAvatarToSetSelector:".popup-box__input_type_avatarUrl",formSelector:".popup-box__form",inputSelector:".popup-box__input",submitButtonSelector:".popup-box__button",errorHiddenSelector:".popup-box__error",inactiveButtonClass:"popup-box__button_disabled",inputErrorClass:"popup-box__input_type_error",errorClass:"popup-box__error_visible"},l=document.querySelector(n.buttonEditProfileSelector),c=document.querySelector(n.buttonAddCardSelector),d=document.querySelector(n.avatarEditButtonSelector),h=document.querySelector(n.userNameToSetSelector),u=document.querySelector(n.userJobToSetSelector),p=document.querySelector(n.profileEditSubmitButtonSelector),_=document.querySelector(n.avatarEditSubmitButtonSelector),m=document.querySelector(n.addCardSubmitButtonSelector),b=new class{constructor(e){this._data=e,this._name=document.querySelector(this._data.userNameSetSelector),this._about=document.querySelector(this._data.userJobSetSelector),this._avatar=document.querySelector(this._data.profileImageSelector)}getUserInfo(){return this._info={},this._info.name=this._name.textContent,this._info.about=this._about.textContent,this._info}setUserInfo(e){let{name:t,about:s,avatar:r}=e;this._name.textContent=t,this._about.textContent=s,this._avatar.style.backgroundImage="url(".concat(r,")")}}(n),S=new class{constructor(e){this._options=e,this._baseUrl=this._options.baseUrl,this._headers=this._options.headers}_checkResponse(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}getUserData(){return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers}).then(this._checkResponse)}getInitialCards(){return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers}).then(this._checkResponse)}getData(){return Promise.all([this.getUserData(),this.getInitialCards()]).then((e=>e))}editProfile(e){let{name:t,about:s}=e;return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:s})}).then(this._checkResponse)}editAvatar(e){return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then(this._checkResponse)}addCard(e){return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify(e)}).then(this._checkResponse)}deleteCard(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then(this._checkResponse)}addLike(e){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"PUT",headers:this._headers}).then(this._checkResponse)}deleteLike(e){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"DELETE",headers:this._headers}).then(this._checkResponse)}}({baseUrl:"https://around.nomoreparties.co/v1/group-12",headers:{authorization:"8e9e95f1-162a-4424-a2c2-34e39da75ee9","Content-Type":"application/json"}}),v=new r(n,n.popupAddCardSelector);v.enableValidation();const k=new r(n,n.popupEditProfileSelector);k.enableValidation();const E=new r(n,n.popupEditAvatarSelector);E.enableValidation(),S.getData().then((t=>{let[s,r]=t;b.setUserInfo(s);const o=new e(r,(e=>{o.addItem(C(e,s._id))}),n.cardsGallerySelector);o.renderItems(r);const i=new a(n,n.popupAddCardSelector,(e=>{e.preventDefault(),I(!0,m);const t=i.getInputValues(),r={name:t.title,link:t.url,owner:{_id:s._id},likes:[]};S.addCard(r).then((e=>{o.addItem(C(e,s._id))})).then((()=>{i.close()})).catch((e=>console.log(e))).finally((()=>{I(!1,m,"Create")}))}));i.setEventListeners(),c.addEventListener("click",(()=>{i.open(),v.resetValidation()}))})).catch((e=>console.log(e)));const f=new class extends i{constructor(e,t,s){super(e,t),this._subtitle=this._popup.querySelector(this._data.popupSubtitleSelector),this._image=this._popup.querySelector(this._data.popupImageImageSelector),this.cardObj=s}open(){this._subtitle.textContent=this.cardObj.name,this._image.alt=this.cardObj.name,this._image.src=this.cardObj.link,super.open()}}(n,n.popupImageSelector),L=new a(n,n.popupAlertSelector),C=(e,t)=>{const r=new s(e,t,n,(()=>{f.cardObj=e,f.open()}),(()=>{r.isOwner()&&(L.handleSubmit=e=>{e.preventDefault(),S.deleteCard(r.getCardId()).then((()=>{r.deleteCard()})).then((()=>{L.close()})).catch((e=>console.log(e)))},L.open())}),(()=>{r.isLiked()?S.deleteLike(r.getCardId()).then((e=>{r.removeLike(),r.updateLikes(e)})).catch((e=>console.log(e))):S.addLike(r.getCardId()).then((e=>{r.addLike(),r.updateLikes(e)})).catch((e=>console.log(e)))}));return r.generateCard()},g=new a(n,n.popupEditProfileSelector,(e=>{e.preventDefault(),I(!0,p);const{name:t,about:s}=g.getInputValues();S.editProfile({name:t,about:s}).then((e=>{b.setUserInfo(e)})).then((()=>g.close())).catch((e=>console.log(e))).finally((()=>I(!1,p,"Save")))}));g.setEventListeners(),l.addEventListener("click",(()=>{g.open();const{name:e,about:t}=b.getUserInfo();h.value=e,u.value=t,k.validateForm()}));const y=new a(n,n.popupEditAvatarSelector,(e=>{e.preventDefault(),I(!0,_);const t=y.getInputValues();S.editAvatar(t.avatarUrl).then((e=>{b.setUserInfo(e)})).then((()=>{y.close()})).catch((e=>console.log(e))).finally((()=>I(!1,_,"Save")))}));d.addEventListener("click",(()=>{y.open(),E.resetValidation()}));const I=(e,t,s)=>{t.textContent=e?"Saving...":s}}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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dkQsR0FDcEIsTUFBTSxLQUFFckgsRUFBRixNQUFROEgsR0FBVStELEVBQWlCeEcsaUJBQ3pDOEMsRUFBSXFCLFlBQVksQ0FBRXhKLEtBQU1BLEVBQU04SCxNQUFPQSxJQUNwQ3FCLE1BQU0yQyxJQUNMdEUsRUFBU08sWUFBWStELE1BRXRCM0MsTUFBSyxJQUFNMEMsRUFBaUJ4SCxVQUU1QjJHLE9BQU1DLEdBQU9DLFFBQVFDLElBQUlGLEtBRXpCRyxTQUFRLElBQU1SLEdBQWMsRUFBT3ZELEVBQXlCLGFBRS9Ed0UsRUFBaUJqSCxvQkFFakJvQyxFQUFrQm5GLGlCQUFpQixTQUFTLEtBQzFDZ0ssRUFBaUJuSCxPQUNqQixNQUFNLEtBQUUxRSxFQUFGLE1BQVE4SCxHQUFVTixFQUFTSSxjQUNqQ1QsRUFBaUIvSCxNQUFRWSxFQUN6Qm9ILEVBQWdCaEksTUFBUTBJLEVBQ3hCc0MsRUFBcUJ0RyxrQkFHdkIsTUFBTWlJLEVBQWtCLElBQUk5RyxFQUFjUSxFQUN4Q0EsRUFBaUJlLHlCQUNoQnJDLElBQ0NBLEVBQUl3RyxpQkFDSkMsR0FBYyxFQUFNdEQsR0FDcEIsTUFBTXdDLEVBQU1pQyxFQUFnQjFHLGlCQUM1QjhDLEVBQUkwQixXQUFXQyxFQUFJa0MsV0FDbEI3QyxNQUFNMkMsSUFDTHRFLEVBQVNPLFlBQVkrRCxNQUV0QjNDLE1BQUssS0FDSjRDLEVBQWdCMUgsV0FHakIyRyxPQUFNQyxHQUFPQyxRQUFRQyxJQUFJRixLQUV6QkcsU0FBUSxJQUFNUixHQUFjLEVBQU90RCxFQUF3QixhQUdoRUosRUFBaUJyRixpQkFBaUIsU0FBUyxLQUN6Q2tLLEVBQWdCckgsT0FDaEIyRixFQUFvQnRHLHFCQUd0QixNQUFNNkcsRUFBZ0IsQ0FBQ3FCLEVBQVdDLEVBQVE5TSxLQUV0QzhNLEVBQU81TSxZQURMMk0sRUFDbUIsWUFFQTdNLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9zY3JpcHRzL3V0aWxzL3NldHRpbmdzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoaXRlbXMsIHJlbmRlcmVyLCBjb250YWluZXJTZWxlY3Rvcikge1xuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXNcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyXG4gIH1cblxuICByZW5kZXJJdGVtcygpIHtcbiAgICB0aGlzLl9pdGVtcy5yZXZlcnNlKCkuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XG4gICAgfSk7XG4gIH1cblxuICBhZGRJdGVtKGVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KVxuICB9XG59XG4iLCIvKipDcmVhdGUgQ2FyZCBjbGFzcyovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoY2FyZE9iaiwgbXlJZCwgcHJvcHMsIGhhbmRsZUNhcmRDbGljaywgaGFuZGxlRGVsZXRlLCBoYW5kbGVMaWtlKSB7XG4gICAgdGhpcy5jYXJkT2JqID0gY2FyZE9ialxuICAgIHRoaXMuX3RpdGxlID0gdGhpcy5jYXJkT2JqLm5hbWU7XG4gICAgdGhpcy5fdXJsID0gdGhpcy5jYXJkT2JqLmxpbms7XG4gICAgdGhpcy5fbXlJZCA9IG15SWRcbiAgICB0aGlzLl9wcm9wcyA9IHByb3BzO1xuICAgIC8vdGhpcy5fYWN0dmF0ZURlbGV0ZSA9IGFjdHZhdGVEZWxldGVcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XG4gICAgdGhpcy5faGFuZGxlRGVsZXRlID0gaGFuZGxlRGVsZXRlO1xuICAgIHRoaXMuX2hhbmRsZUxpa2UgPSBoYW5kbGVMaWtlO1xuICAgIC8vdGhpcy5pc0xpa2VkID0gZmFsc2VcbiAgfVxuXG4gIC8qKkdldCBhbiBlbGVtZW50IGZyb20gdGVtcGxhdGUqL1xuICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50XG4gICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fcHJvcHMuY2FyZFRlbXBsYXRlU2VsZWN0b3IpXG4gICAgLmNvbnRlbnRcbiAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9wcm9wcy5jYXJkU2VsZWN0b3IpXG4gICAgLmNsb25lTm9kZSh0cnVlKTtcbiAgfVxuXG4gIGlzT3duZXIgPSAoKSA9PiB7XG4gICAgcmV0dXJuIHRoaXMuY2FyZE9iai5vd25lci5faWQgPT0gdGhpcy5fbXlJZFxuICB9XG5cbiAgaGFzTGlrZSA9IChsaWtlKSA9PiB7XG4gICAgcmV0dXJuIGxpa2UuX2lkID09IHRoaXMuX215SWRcbiAgfVxuXG4gIF9jaGVja0xpa2VzID0gKCkgPT4ge1xuICAgIGlmICh0aGlzLmNhcmRPYmoubGlrZXMubGVuZ3RoID4gMCkge1xuICAgICAgcmV0dXJuIHRoaXMuY2FyZE9iai5saWtlcy5zb21lKChsaWtlKSA9PiB7XG4gICAgICAgIHJldHVybiB0aGlzLmhhc0xpa2UobGlrZSlcbiAgICAgIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgfVxuXG4gIGdldENhcmRJZCA9ICgpID0+IHtcbiAgICAgcmV0dXJuIHRoaXMuY2FyZE9iai5faWQ7XG4gIH1cblxuICAvKipDcmVhdGUgbmV3IGNhcmQqL1xuICBnZW5lcmF0ZUNhcmQoKSB7XG4gICAgdGhpcy5fY2FyZCA9IHRoaXMuX2dldFRlbXBsYXRlKClcbiAgICB0aGlzLl9jYXJkVGl0bGUgPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IodGhpcy5fcHJvcHMuY2FyZFRpdGxlU2VsZWN0b3IpO1xuICAgIHRoaXMuX2NhcmRJbWFnZSA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3Rvcih0aGlzLl9wcm9wcy5jYXJkSW1hZ2VTZWxlY3Rvcik7XG4gICAgdGhpcy5fYnV0dG9uRGVsZXRlID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKHRoaXMuX3Byb3BzLmJ1dHRvbkRlbGV0ZVNlbGVjdG9yKTtcbiAgICB0aGlzLl9idXR0b25MaWtlID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKHRoaXMuX3Byb3BzLmJ1dHRvbkxpa2VTZWxlY3Rvcik7XG4gICAgdGhpcy5saWtlc051bWJlciA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3Rvcih0aGlzLl9wcm9wcy5jYXJkTGlrZXNOdW1iZXJTZWxlY3Rvcik7XG5cbiAgICB0aGlzLl9jYXJkVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl90aXRsZTtcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWx0ID0gdGhpcy5fdGl0bGU7XG4gICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9IHRoaXMuX3VybDtcbiAgICB0aGlzLmNhcmRJZCA9IHRoaXMuY2FyZE9iai5faWQ7XG4gICAgdGhpcy51cGRhdGVMaWtlcyh0aGlzLmNhcmRPYmopXG5cbiAgICBpZiAodGhpcy5fY2hlY2tMaWtlcygpKSB7XG4gICAgICB0aGlzLmFkZExpa2UoKVxuICAgIH1cblxuICAgIGlmICh0aGlzLmlzT3duZXIoKSkge1xuICAgICAgdGhpcy5fYnV0dG9uRGVsZXRlLmNsYXNzTGlzdC5hZGQodGhpcy5fcHJvcHMuYnV0dG9uRGVsZXRlQWN0aXZlQ2xhc3MpXG4gICAgfVxuXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIHJldHVybiB0aGlzLl9jYXJkO1xuICB9XG5cbiAgdXBkYXRlTGlrZXMgPSAodmFsdWUpID0+IHtcbiAgICB0aGlzLmxpa2VzTnVtYmVyLnRleHRDb250ZW50ID0gdmFsdWUubGlrZXMubGVuZ3RoXG4gIH1cblxuICBkZWxldGVDYXJkID0gKCkgPT4ge1xuICAgIHRoaXMuX2NhcmQucmVtb3ZlKCk7XG4gIH1cblxuICBoYXNJZCA9ICgpID0+IHtcbiAgICByZXR1cm4gdGhpcy5fbXlJZFxuICB9XG5cbiAgaXNMaWtlZCA9ICgpID0+IHtcbiAgICByZXR1cm4gdGhpcy5fYnV0dG9uTGlrZS5jbGFzc0xpc3QuY29udGFpbnModGhpcy5fcHJvcHMuYnV0dG9uTGlrZUFjdGl2ZUNsYXNzKVxuICB9XG5cbiAgYWRkTGlrZSA9ICgpID0+IHtcbiAgICB0aGlzLl9idXR0b25MaWtlLmNsYXNzTGlzdC5hZGQodGhpcy5fcHJvcHMuYnV0dG9uTGlrZUFjdGl2ZUNsYXNzKTtcbiAgfVxuXG4gIHJlbW92ZUxpa2UgPSAoKSA9PiB7XG4gICAgdGhpcy5fYnV0dG9uTGlrZS5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3Byb3BzLmJ1dHRvbkxpa2VBY3RpdmVDbGFzcyk7XG4gIH1cblxuICAvKipTZXQgZXZlbnQtbGlzdGVuZXJzIGZvciBjbGljayBldmVudHMgb24gZGVsZXRlLSAmJiBsaWtlLWJ1dHRvbnMgJiYgZm9yIGNhcmQgaW1hZ2UqL1xuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fYnV0dG9uRGVsZXRlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVEZWxldGUpO1xuICAgIHRoaXMuX2J1dHRvbkxpa2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZUxpa2UpO1xuICAgIHRoaXMuX2NhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlQ2FyZENsaWNrKTtcbiAgfVxufVxuIiwiZXhwb3J0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3RvcihkYXRhLCBmb3JtRWxlbWVudFNlbGVjdG9yKSB7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGZvcm1FbGVtZW50U2VsZWN0b3IpO1xuICAgIHRoaXMuX2RhdGEgPSBkYXRhO1xuICAgIHRoaXMuX2lucHV0RWxlbWVudHMgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fZGF0YS5pbnB1dFNlbGVjdG9yKSk7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fZGF0YS5zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG4gIH1cblxuICAvKipTaG93IGlucHV0LWVycm9yIG1lc3NhZ2UqL1xuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZGF0YS5pbnB1dEVycm9yQ2xhc3MpO1xuICAgIHRoaXMuX2Vycm9yVGV4dCA9IHRoaXNcbiAgICAuX2Zvcm1FbGVtZW50XG4gICAgLnF1ZXJ5U2VsZWN0b3IoYCR7dGhpcy5fZGF0YS5lcnJvckhpZGRlblNlbGVjdG9yfV8ke2lucHV0RWxlbWVudC5pZH1gKTtcbiAgICB0aGlzLl9lcnJvclRleHQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgdGhpcy5fZXJyb3JUZXh0LmNsYXNzTGlzdC5hZGQodGhpcy5fZGF0YS5lcnJvckNsYXNzKTtcbiAgfVxuXG4gIC8qKkhpZGUgaW5wdXQtZXJyb3IgbWVzc2FnZSovXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9kYXRhLmlucHV0RXJyb3JDbGFzcyk7XG4gICAgdGhpcy5fZXJyb3JUZXh0ID0gdGhpc1xuICAgIC5fZm9ybUVsZW1lbnRcbiAgICAucXVlcnlTZWxlY3RvcihgJHt0aGlzLl9kYXRhLmVycm9ySGlkZGVuU2VsZWN0b3J9XyR7aW5wdXRFbGVtZW50LmlkfWApO1xuICAgIHRoaXMuX2Vycm9yVGV4dC50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgdGhpcy5fZXJyb3JUZXh0LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZGF0YS5lcnJvckNsYXNzKTtcbiAgfVxuXG4gIC8qKlJldHVybiB0cnVlIGlmIHRoZSBpbnB1dC1lbGVtZW50IGhhcyBpbnZhbGlkIGlucHV0Ki9cbiAgX2NoZWNrSWZJbnZhbGlkKGlucHV0RWxlbWVudCkge1xuICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xuICB9XG5cbiAgLyoqUmV0dXJuIHRydWUgaWYgc29tZSBvZiBjaG9zZW4gaW5wdXQtZWxlbWVudHMgaGF2ZSBpbnZhbGlkIGlucHV0Ki9cbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcbiAgICByZXR1cm4gdGhpcy5faW5wdXRFbGVtZW50cy5zb21lKHRoaXMuX2NoZWNrSWZJbnZhbGlkKTtcbiAgfVxuXG4gIC8qKkFjdGl2YXRlIHN1Ym1pdC1idXR0b24qL1xuICBfYWN0aXZhdGVCdXR0b24oKSB7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2RhdGEuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKTtcbiAgfVxuXG4gIC8qKkRlYWN0aXZhdGUgc3VibWl0LWJ1dHRvbiovXG4gIF9kZWFjdGl2YXRlQnV0dG9uKCkge1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9kYXRhLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgdHJ1ZSk7XG4gIH1cblxuICAvKipTZXQgYnV0dG9uIHN0YXRlLCBkZXBlbmRpbmcgb24gdmFsaWRpZHR5IG9mIGNvcnJlc3BvbmRpbmcgaW5wdXRzKi9cbiAgX3NldEJ1dHRvblN0YXRlKCkge1xuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xuICAgICAgdGhpcy5fZGVhY3RpdmF0ZUJ1dHRvbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9hY3RpdmF0ZUJ1dHRvbigpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlNldCBlcnJvci1tZXNzYWdlIHN0YXRlLCBkZXBlbmRpbmcgb24gdmFsaWRpdHkgb2YgdGhlIGNvcnJlc3BvbmRpbmcgZWxlbWVudCovXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XG4gICAgaWYgKHRoaXMuX2NoZWNrSWZJbnZhbGlkKGlucHV0RWxlbWVudCkpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgLyoqVmFsaWRhdGUgdGhlIGNob3NlbiBmb3JtRWxlbWVudCovXG4gIHZhbGlkYXRlRm9ybSgpIHtcbiAgICB0aGlzLl9zZXRCdXR0b25TdGF0ZSgpO1xuICAgIHRoaXMuX2lucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlJlc2V0IHRoZSBjaG9zZW4gZm9ybUVsZW1lbnQgdmFsaWRhdGlvbiByZXN1bHRzKi9cbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2RlYWN0aXZhdGVCdXR0b24oKTtcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzLmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKkVuYWJsZSB2YWxpZGF0aW9uKi9cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzLmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xuICAgICAgICB0aGlzLl9zZXRCdXR0b25TdGF0ZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbn1cbiIsIi8qKkNyZWF0ZSBQb3B1cCBjbGFzcyAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3RvcihkYXRhLCBwb3B1cFNlbGVjdG9yKSB7XG4gICAgdGhpcy5fZGF0YSA9IGRhdGFcbiAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fYnV0dG9uQ2xvc2UgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKHRoaXMuX2RhdGEuYnV0dG9uQ2xvc2VTZWxlY3Rvcik7XG4gIH1cblxuLyoqT3BlbiBwb3B1cCAqL1xuICBvcGVuKCkge1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQodGhpcy5fZGF0YS5wb3B1cE9wZW5DbGFzcyk7XG4gICAgdGhpcy5zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG5cbi8qKkNsb3NlIHBvcHVwICovXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZGF0YS5wb3B1cE9wZW5DbGFzcyk7XG4gICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVycygpO1xuICB9XG5cbi8qKkVzY2FwZSBrZXkgaGFuZGxlciAqL1xuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZ0KSA9PiB7XG4gICAgaWYgKGV2dC5rZXkgPT0gXCJFc2NhcGVcIikge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfVxuXG4vKipDbG9zZSBvbiBjbGljayBoYW5kbGVyICovXG4gIF9oYW5kbGVDbGlja0Nsb3NlID0gKGV2dCkgPT4ge1xuICAgIGlmIChldnQudGFyZ2V0ICA9PSB0aGlzLl9wb3B1cCB8fCBldnQudGFyZ2V0ID09IHRoaXMuX2J1dHRvbkNsb3NlKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9XG5cbi8qKlNldCBldmVudC1saXN0ZW5lcnMgZm9yIGNsaWNrICYmIGVzYyBldmVudHMgKi9cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZUNsaWNrQ2xvc2UpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuXG4vKipSZW1vdmUgZXZlbnQtbGlzdGVuZXJzIGZvciBjbGljayAmJiBlc2MgZXZlbnRzICovXG4gIHJlbW92ZUV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BvcHVwLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVDbGlja0Nsb3NlKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3RvcihkYXRhLCBwb3B1cFNlbGVjdG9yLCBoYW5kbGVTdWJtaXQpIHtcbiAgICBzdXBlcihkYXRhLCBwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcImZvcm1cIik7XG4gICAgdGhpcy5oYW5kbGVTdWJtaXQgPSBoYW5kbGVTdWJtaXQ7XG4gICAgdGhpcy5faW5wdXRFbGVtZW50cyA9IEFycmF5LmZyb20odGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9kYXRhLmlucHV0U2VsZWN0b3IpKTtcbiAgfVxuXG4gIGdldElucHV0VmFsdWVzKCkge1xuICAgIHRoaXMuX2Zvcm1WYWx1ZXMgPSB7fTtcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzLmZvckVhY2goaW5wdXRFbGVtZW50ID0+IHRoaXMuX2Zvcm1WYWx1ZXNbaW5wdXRFbGVtZW50Lm5hbWVdID0gaW5wdXRFbGVtZW50LnZhbHVlKTtcbiAgICByZXR1cm4gdGhpcy5fZm9ybVZhbHVlcztcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgdGhpcy5fZm9ybS5yZXNldCgpO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgdGhpcy5oYW5kbGVTdWJtaXQpO1xuICB9XG5cbiAgcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9mb3JtLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgdGhpcy5oYW5kbGVTdWJtaXQpO1xuICB9XG59XG4iLCJpbXBvcnQgbG9nb1NyYyBmcm9tIFwiLi4vaW1hZ2VzL2xvZ28vbG9nby5zdmdcIjtcbmltcG9ydCBcIi4vaW5kZXguY3NzXCI7XG5pbXBvcnQgQXBpIGZyb20gXCIuLi9zY3JpcHRzL2NvbXBvbmVudHMvQXBpLmpzXCI7XG5pbXBvcnQgeyB2YWxpZGF0aW9uU2V0dGluZ3MsIHBhZ2VTZXR0aW5ncywgZG9jdW1lbnRTZXR0aW5ncyB9IGZyb20gXCIuLi9zY3JpcHRzL3V0aWxzL3NldHRpbmdzLmpzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9zY3JpcHRzL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IHsgRm9ybVZhbGlkYXRvciB9IGZyb20gXCIuLi9zY3JpcHRzL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9zY3JpcHRzL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xuY29uc3QgbG9nbyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibG9nb1wiKTtcbmxvZ28uc3JjID0gbG9nb1NyYztcbmNvbnN0IHRoaXNQYWdlU2V0dGluZ3MgPSB7IC4uLmRvY3VtZW50U2V0dGluZ3MsIC4uLnBhZ2VTZXR0aW5ncywgLi4udmFsaWRhdGlvblNldHRpbmdzIH07XG5jb25zdCBidXR0b25FZGl0UHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpc1BhZ2VTZXR0aW5ncy5idXR0b25FZGl0UHJvZmlsZVNlbGVjdG9yKTtcbmNvbnN0IGJ1dHRvbkFkZENhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXNQYWdlU2V0dGluZ3MuYnV0dG9uQWRkQ2FyZFNlbGVjdG9yKTtcbmNvbnN0IGJ1dHRvbkVkaXRBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXNQYWdlU2V0dGluZ3MuYXZhdGFyRWRpdEJ1dHRvblNlbGVjdG9yKVxuY29uc3QgcHJvZmlsZU5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpc1BhZ2VTZXR0aW5ncy51c2VyTmFtZVRvU2V0U2VsZWN0b3IpO1xuY29uc3QgcHJvZmlsZUpvYklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzUGFnZVNldHRpbmdzLnVzZXJKb2JUb1NldFNlbGVjdG9yKTtcbmNvbnN0IHByb2ZpbGVFZGl0U3VibWl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzUGFnZVNldHRpbmdzLnByb2ZpbGVFZGl0U3VibWl0QnV0dG9uU2VsZWN0b3IpXG5jb25zdCBhdmF0YXJFZGl0U3VibWl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzUGFnZVNldHRpbmdzLmF2YXRhckVkaXRTdWJtaXRCdXR0b25TZWxlY3RvcilcbmNvbnN0IGFkZENhcmRTdWJtaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXNQYWdlU2V0dGluZ3MuYWRkQ2FyZFN1Ym1pdEJ1dHRvblNlbGVjdG9yKVxuXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh0aGlzUGFnZVNldHRpbmdzKTtcbmNvbnN0IGFwaU9wdGlvbnMgPSB7XG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9ncm91cC0xMlwiLFxuICBoZWFkZXJzOiB7XG4gICAgYXV0aG9yaXphdGlvbjogXCI4ZTllOTVmMS0xNjJhLTQ0MjQtYTJjMi0zNGUzOWRhNzVlZTlcIixcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICB9XG59XG5cbmNvbnN0IGFwaSA9IG5ldyBBcGkoYXBpT3B0aW9ucylcbmNvbnN0IGNhcmRBZGRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodGhpc1BhZ2VTZXR0aW5ncywgdGhpc1BhZ2VTZXR0aW5ncy5wb3B1cEFkZENhcmRTZWxlY3Rvcik7XG5jYXJkQWRkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5jb25zdCBwcm9maWxlRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHRoaXNQYWdlU2V0dGluZ3MsIHRoaXNQYWdlU2V0dGluZ3MucG9wdXBFZGl0UHJvZmlsZVNlbGVjdG9yKTtcbnByb2ZpbGVGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbmNvbnN0IGF2YXRhckZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih0aGlzUGFnZVNldHRpbmdzLCB0aGlzUGFnZVNldHRpbmdzLnBvcHVwRWRpdEF2YXRhclNlbGVjdG9yKTtcbmF2YXRhckZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5hcGkuZ2V0RGF0YSgpXG4udGhlbigoW3VzZXJEYXRhLCBjYXJkc10pID0+IHtcbiAgdXNlckluZm8uc2V0VXNlckluZm8odXNlckRhdGEpO1xuXG4gIGNvbnN0IGNhcmRzR2FsbGVyeSA9IG5ldyBTZWN0aW9uKGNhcmRzLCAoaXRlbSkgPT4ge1xuICAgIGNhcmRzR2FsbGVyeS5hZGRJdGVtKGNyZWF0ZUNhcmQoaXRlbSwgdXNlckRhdGEuX2lkKSlcbiAgfSwgdGhpc1BhZ2VTZXR0aW5ncy5jYXJkc0dhbGxlcnlTZWxlY3Rvcik7XG4gIGNhcmRzR2FsbGVyeS5yZW5kZXJJdGVtcyhjYXJkcylcblxuICBjb25zdCBwb3B1cEFkZCA9IG5ldyBQb3B1cFdpdGhGb3JtKHRoaXNQYWdlU2V0dGluZ3MsXG4gICAgdGhpc1BhZ2VTZXR0aW5ncy5wb3B1cEFkZENhcmRTZWxlY3RvciwgKGV2dCkgPT4ge1xuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHJlbmRlckxvYWRpbmcodHJ1ZSwgYWRkQ2FyZFN1Ym1pdEJ1dHRvbik7XG4gICAgY29uc3QgaW5wdXRWYWx1ZXMgPSBwb3B1cEFkZC5nZXRJbnB1dFZhbHVlcygpO1xuICAgIGNvbnN0IGNhcmQgPSB7XG4gICAgICBuYW1lOiBpbnB1dFZhbHVlcy50aXRsZSxcbiAgICAgIGxpbms6IGlucHV0VmFsdWVzLnVybCxcbiAgICAgIG93bmVyOiB7XG4gICAgICAgIF9pZDogdXNlckRhdGEuX2lkXG4gICAgICB9LFxuICAgICAgbGlrZXM6IFtdXG4gICAgfVxuXG4gICAgYXBpLmFkZENhcmQoY2FyZClcbiAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICBjYXJkc0dhbGxlcnkuYWRkSXRlbShjcmVhdGVDYXJkKHJlcywgdXNlckRhdGEuX2lkKSlcbiAgICB9KVxuICAgIC50aGVuKCgpID0+IHtcbiAgICAgIHBvcHVwQWRkLmNsb3NlKCk7XG4gICAgfSlcblxuICAgIC5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coZXJyKSlcblxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgIHJlbmRlckxvYWRpbmcoZmFsc2UsIGFkZENhcmRTdWJtaXRCdXR0b24sIFwiQ3JlYXRlXCIpO1xuICAgIH0pXG4gIH0pO1xuICBwb3B1cEFkZC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4gIGJ1dHRvbkFkZENhcmQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBwb3B1cEFkZC5vcGVuKCk7XG4gICAgY2FyZEFkZEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XG4gIH0pO1xufSlcbi5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coZXJyKSlcblxuY29uc3QgcG9wdXBXaXRoSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UodGhpc1BhZ2VTZXR0aW5ncywgdGhpc1BhZ2VTZXR0aW5ncy5wb3B1cEltYWdlU2VsZWN0b3IpO1xuY29uc3QgcG9wdXBBbGVydCA9IG5ldyBQb3B1cFdpdGhGb3JtKHRoaXNQYWdlU2V0dGluZ3MsIHRoaXNQYWdlU2V0dGluZ3MucG9wdXBBbGVydFNlbGVjdG9yKVxuXG5jb25zdCBjcmVhdGVDYXJkID0gKGNhcmQsIG15SWQpID0+IHtcbiAgY29uc3QgbmV3Q2FyZCA9IG5ldyBDYXJkKGNhcmQsIG15SWQsIHRoaXNQYWdlU2V0dGluZ3MsICgpID0+IHtcbiAgICBwb3B1cFdpdGhJbWFnZS5jYXJkT2JqID0gY2FyZDtcbiAgICBwb3B1cFdpdGhJbWFnZS5vcGVuKCk7XG4gIH0sICgpID0+IHtcbiAgICBpZiAobmV3Q2FyZC5pc093bmVyKCkpIHtcbiAgICAgIHBvcHVwQWxlcnQuaGFuZGxlU3VibWl0ID0gKGV2dCkgPT4ge1xuICAgICAgICBldnQucHJldmVudERlZmF1bHQoKVxuICAgICAgICBhcGkuZGVsZXRlQ2FyZChuZXdDYXJkLmdldENhcmRJZCgpKVxuICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgbmV3Q2FyZC5kZWxldGVDYXJkKClcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIHBvcHVwQWxlcnQuY2xvc2UoKVxuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGVycikpXG4gICAgICB9O1xuICAgICAgcG9wdXBBbGVydC5vcGVuKClcbiAgICB9XG4gIH0sICgpID0+IHtcbiAgICBpZiAoIW5ld0NhcmQuaXNMaWtlZCgpKSB7XG4gICAgICBhcGkuYWRkTGlrZShuZXdDYXJkLmdldENhcmRJZCgpKVxuICAgICAgLnRoZW4odmFsdWUgPT4ge1xuICAgICAgICBuZXdDYXJkLmFkZExpa2UoKTtcbiAgICAgICAgbmV3Q2FyZC51cGRhdGVMaWtlcyh2YWx1ZSk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKVxuICAgIH0gZWxzZSB7XG4gICAgICBhcGkuZGVsZXRlTGlrZShuZXdDYXJkLmdldENhcmRJZCgpKVxuICAgICAgLnRoZW4odmFsdWUgPT4ge1xuICAgICAgICBuZXdDYXJkLnJlbW92ZUxpa2UoKTtcbiAgICAgICAgbmV3Q2FyZC51cGRhdGVMaWtlcyh2YWx1ZSlcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGVycikpXG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIG5ld0NhcmQuZ2VuZXJhdGVDYXJkKCk7XG59O1xuXG5jb25zdCBwb3B1cEVkaXRQcm9maWxlID0gbmV3IFBvcHVwV2l0aEZvcm0odGhpc1BhZ2VTZXR0aW5ncyxcbnRoaXNQYWdlU2V0dGluZ3MucG9wdXBFZGl0UHJvZmlsZVNlbGVjdG9yLFxuKGV2dCkgPT4ge1xuICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgcmVuZGVyTG9hZGluZyh0cnVlLCBwcm9maWxlRWRpdFN1Ym1pdEJ1dHRvbilcbiAgY29uc3QgeyBuYW1lLCBhYm91dCB9ID0gcG9wdXBFZGl0UHJvZmlsZS5nZXRJbnB1dFZhbHVlcygpO1xuICBhcGkuZWRpdFByb2ZpbGUoeyBuYW1lOiBuYW1lLCBhYm91dDogYWJvdXQgfSlcbiAgLnRoZW4oKHVzZXJPYmopID0+IHtcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyh1c2VyT2JqKTtcbiAgfSlcbiAgLnRoZW4oKCkgPT4gcG9wdXBFZGl0UHJvZmlsZS5jbG9zZSgpKVxuXG4gIC5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coZXJyKSlcblxuICAuZmluYWxseSgoKSA9PiByZW5kZXJMb2FkaW5nKGZhbHNlLCBwcm9maWxlRWRpdFN1Ym1pdEJ1dHRvbiwgXCJTYXZlXCIpKVxufSk7XG5wb3B1cEVkaXRQcm9maWxlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmJ1dHRvbkVkaXRQcm9maWxlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIHBvcHVwRWRpdFByb2ZpbGUub3BlbigpO1xuICBjb25zdCB7IG5hbWUsIGFib3V0IH0gPSB1c2VySW5mby5nZXRVc2VySW5mbygpXG4gIHByb2ZpbGVOYW1lSW5wdXQudmFsdWUgPSBuYW1lO1xuICBwcm9maWxlSm9iSW5wdXQudmFsdWUgPSBhYm91dDtcbiAgcHJvZmlsZUZvcm1WYWxpZGF0b3IudmFsaWRhdGVGb3JtKCk7XG59KTtcblxuY29uc3QgcG9wdXBFZGl0QXZhdGFyID0gbmV3IFBvcHVwV2l0aEZvcm0odGhpc1BhZ2VTZXR0aW5ncyxcbiAgdGhpc1BhZ2VTZXR0aW5ncy5wb3B1cEVkaXRBdmF0YXJTZWxlY3RvcixcbiAgKGV2dCkgPT4ge1xuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHJlbmRlckxvYWRpbmcodHJ1ZSwgYXZhdGFyRWRpdFN1Ym1pdEJ1dHRvbilcbiAgICBjb25zdCB1cmwgPSBwb3B1cEVkaXRBdmF0YXIuZ2V0SW5wdXRWYWx1ZXMoKTtcbiAgICBhcGkuZWRpdEF2YXRhcih1cmwuYXZhdGFyVXJsKVxuICAgIC50aGVuKCh1c2VyT2JqKSA9PiB7XG4gICAgICB1c2VySW5mby5zZXRVc2VySW5mbyh1c2VyT2JqKTtcbiAgICB9KVxuICAgIC50aGVuKCgpID0+IHtcbiAgICAgIHBvcHVwRWRpdEF2YXRhci5jbG9zZSgpO1xuICAgIH0pXG5cbiAgICAuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGVycikpXG5cbiAgICAuZmluYWxseSgoKSA9PiByZW5kZXJMb2FkaW5nKGZhbHNlLCBhdmF0YXJFZGl0U3VibWl0QnV0dG9uLCBcIlNhdmVcIikpXG4gIH0pO1xuXG5idXR0b25FZGl0QXZhdGFyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIHBvcHVwRWRpdEF2YXRhci5vcGVuKCk7XG4gIGF2YXRhckZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XG59KVxuXG5jb25zdCByZW5kZXJMb2FkaW5nID0gKGlzTG9hZGluZywgYnV0dG9uLCB2YWx1ZSkgPT4ge1xuICBpZiAoaXNMb2FkaW5nKSB7XG4gICAgYnV0dG9uLnRleHRDb250ZW50ID0gXCJTYXZpbmcuLi5cIlxuICB9IGVsc2Uge1xuICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9IHZhbHVlXG4gIH1cbn1cbiIsImV4cG9ydCBjb25zdCBkb2N1bWVudFNldHRpbmdzID0ge1xuLy8gQlVUVE9OU1xuLy8vIFNFTEVDVE9SU1xuICBidXR0b25MaWtlU2VsZWN0b3I6IFwiLmxpa2UtYnV0dG9uXCIsXG4gIGJ1dHRvbkRlbGV0ZVNlbGVjdG9yOiBcIi5kZWxldGUtYnV0dG9uXCIsXG4gIGJ1dHRvbkNsb3NlU2VsZWN0b3I6IFwiLmNsb3NlLWJ1dHRvblwiLFxuLy8vIENTUyBDTEFTU0VTXG4gIGJ1dHRvbkxpa2VBY3RpdmVDbGFzczogXCJsaWtlLWJ1dHRvbl9zdGF0dXNfYWN0aXZlXCIsXG4gIGJ1dHRvbkRlbGV0ZUFjdGl2ZUNsYXNzOiBcImRlbGV0ZS1idXR0b25fdmlzaWJsZVwiLFxuXG4vLyBQT1BVUFNcbi8vLyBTRUxFQ1RPUlNcbiAgcG9wdXBTZWxlY3RvcjogXCIucG9wdXAtYm94XCIsXG4gIHBvcHVwU3VidGl0bGVTZWxlY3RvcjogXCIucG9wdXAtYm94X19zdWJ0aXRsZVwiLFxuICBwb3B1cEltYWdlSW1hZ2VTZWxlY3RvcjogXCIucG9wdXAtYm94X19pbWFnZVwiLFxuLy8vIENTUyBDTEFTU0VTXG4gIHBvcHVwT3BlbkNsYXNzOiBcInBvcHVwLWJveF9vcGVuZWRcIlxufVxuXG5leHBvcnQgY29uc3QgdmFsaWRhdGlvblNldHRpbmdzID0ge1xuLy8vIFNFTEVDVE9SU1xuICBmb3JtU2VsZWN0b3I6IFwiLnBvcHVwLWJveF9fZm9ybVwiLFxuICBpbnB1dFNlbGVjdG9yOiBcIi5wb3B1cC1ib3hfX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5wb3B1cC1ib3hfX2J1dHRvblwiLFxuICBlcnJvckhpZGRlblNlbGVjdG9yOiBcIi5wb3B1cC1ib3hfX2Vycm9yXCIsXG4vLy8gQ1NTIENMQVNTRVNcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJwb3B1cC1ib3hfX2J1dHRvbl9kaXNhYmxlZFwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwicG9wdXAtYm94X19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwicG9wdXAtYm94X19lcnJvcl92aXNpYmxlXCJcbn07XG5cbmV4cG9ydCBjb25zdCBwYWdlU2V0dGluZ3MgPSB7XG4vLyBFTEVNRU5UUyBTRUNUSU9OXG4vLy8gU0VMRUNUT1JTXG4gIGNhcmRzR2FsbGVyeVNlbGVjdG9yOiBcIi5lbGVtZW50c19fY2FyZHNcIixcbiAgY2FyZFRlbXBsYXRlU2VsZWN0b3I6IFwiI2VsZW1lbnRzX19jYXJkXCIsXG4gIGNhcmRTZWxlY3RvcjogXCIuZWxlbWVudHNfX2NhcmRcIixcbiAgY2FyZEltYWdlU2VsZWN0b3I6IFwiLmVsZW1lbnRzX19pbWFnZVwiLFxuICBjYXJkVGl0bGVTZWxlY3RvcjogXCIuZWxlbWVudHNfX3RpdGxlXCIsXG4gIGNhcmRMaWtlc051bWJlclNlbGVjdG9yOiBcIi5lbGVtZW50c19fbGlrZS1udW1iZXJcIixcblxuLy8gUFJPRklMRSBTRUNUSU9OXG4vLy8gU0VMRUNUT1JTXG4gIHVzZXJOYW1lU2V0U2VsZWN0b3I6IFwiLnByb2ZpbGVfX25hbWVcIixcbiAgdXNlckpvYlNldFNlbGVjdG9yOiBcIi5wcm9maWxlX19wcm9mZXNzaW9uXCIsXG4gIHByb2ZpbGVJbWFnZVNlbGVjdG9yOiBcIi5wcm9maWxlX19pbWFnZVwiLFxuICBidXR0b25FZGl0UHJvZmlsZVNlbGVjdG9yOiBcIi5lZGl0LWJ1dHRvblwiLFxuICBidXR0b25BZGRDYXJkU2VsZWN0b3I6IFwiLmFkZC1idXR0b25cIixcbiAgYXZhdGFyRWRpdEJ1dHRvblNlbGVjdG9yOiBcIi5hdmF0YXItZWRpdC1idXR0b25cIixcbiAgYnV0dG9uU3VibWl0QWxlcnRTZWxlY3RvcjogXCIucG9wdXAtYm94X19idXR0b25fYWxlcnRcIixcbiAgcHJvZmlsZUVkaXRTdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXAtYm94X19idXR0b25fZWRpdC1wcm9maWxlXCIsXG4gIGFkZENhcmRTdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXAtYm94X19idXR0b25fYWRkLWNhcmRcIixcbiAgYXZhdGFyRWRpdFN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5wb3B1cC1ib3hfX2J1dHRvbl9lZGl0LWF2YXRhclwiLFxuXG4vLyBQT1BVUFNcbi8vLyBTRUxFQ1RPUlNcbiAgcG9wdXBFZGl0UHJvZmlsZVNlbGVjdG9yOiBcIi5wb3B1cC1ib3hfZWRpdC1wcm9maWxlXCIsXG4gIHBvcHVwRWRpdEF2YXRhclNlbGVjdG9yOiBcIi5wb3B1cC1ib3hfZWRpdC1hdmF0YXJcIixcbiAgcG9wdXBBZGRDYXJkU2VsZWN0b3I6IFwiLnBvcHVwLWJveF9hZGQtY2FyZFwiLFxuICBwb3B1cEltYWdlU2VsZWN0b3I6IFwiLnBvcHVwLWJveF9pbWFnZVwiLFxuICBwb3B1cEFsZXJ0U2VsZWN0b3I6IFwiLnBvcHVwLWJveF9hbGVydFwiLFxuICB1c2VyTmFtZVRvU2V0U2VsZWN0b3I6IFwiLnBvcHVwLWJveF9faW5wdXRfdHlwZV9uYW1lXCIsXG4gIHVzZXJKb2JUb1NldFNlbGVjdG9yOiBcIi5wb3B1cC1ib3hfX2lucHV0X3R5cGVfam9iXCIsXG4gIHVzZXJBdmF0YXJUb1NldFNlbGVjdG9yOiBcIi5wb3B1cC1ib3hfX2lucHV0X3R5cGVfYXZhdGFyVXJsXCJcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IoZGF0YSkge1xuICAgIHRoaXMuX2RhdGEgPSBkYXRhO1xuICAgIHRoaXMuX25hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2RhdGEudXNlck5hbWVTZXRTZWxlY3Rvcik7XG4gICAgdGhpcy5fYWJvdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2RhdGEudXNlckpvYlNldFNlbGVjdG9yKTtcbiAgICB0aGlzLl9hdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2RhdGEucHJvZmlsZUltYWdlU2VsZWN0b3IpXG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICB0aGlzLl9pbmZvID0ge307XG4gICAgdGhpcy5faW5mby5uYW1lID0gdGhpcy5fbmFtZS50ZXh0Q29udGVudDtcbiAgICB0aGlzLl9pbmZvLmFib3V0ID0gdGhpcy5fYWJvdXQudGV4dENvbnRlbnQ7XG4gICAgcmV0dXJuIHRoaXMuX2luZm87XG4gIH1cblxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGFib3V0LCBhdmF0YXIgfSkge1xuICAgIHRoaXMuX25hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHRoaXMuX2Fib3V0LnRleHRDb250ZW50ID0gYWJvdXQ7XG4gICAgdGhpcy5fYXZhdGFyLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJHthdmF0YXJ9KWA7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICB0aGlzLl9vcHRpb25zID0gb3B0aW9ucztcbiAgICB0aGlzLl9iYXNlVXJsID0gdGhpcy5fb3B0aW9ucy5iYXNlVXJsO1xuICAgIHRoaXMuX2hlYWRlcnMgPSB0aGlzLl9vcHRpb25zLmhlYWRlcnM7XG4gIH1cblxuICBfY2hlY2tSZXNwb25zZShyZXMpIHtcbiAgICBpZiAocmVzLm9rKSB7XG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICB9XG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApXG4gIH1cblxuICBnZXRVc2VyRGF0YSgpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXG4gICAgfSlcbiAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKVxuICB9XG5cbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcbiAgICB9KVxuICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpXG4gIH1cblxuICBnZXREYXRhKCkge1xuICAgIHJldHVybiBQcm9taXNlLmFsbChbdGhpcy5nZXRVc2VyRGF0YSgpLCB0aGlzLmdldEluaXRpYWxDYXJkcygpXSlcbiAgICAudGhlbigodmFsdWVzKSA9PiB7XG4gICAgICByZXR1cm4gdmFsdWVzXG4gICAgfSlcbiAgfVxuXG4gIGVkaXRQcm9maWxlKHsgbmFtZSwgYWJvdXQgfSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgYWJvdXQ6IGFib3V0XG4gICAgICB9KVxuICAgIH0pXG4gICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSlcbiAgfVxuXG4gIGVkaXRBdmF0YXIodXJsKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgYXZhdGFyOiB1cmxcbiAgICAgIH0pXG4gICAgfSlcbiAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKVxuICB9XG5cbiAgYWRkQ2FyZChjYXJkT2JqKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShjYXJkT2JqKVxuICAgIH0pXG4gICAgLy8udGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKVxuICAgIC8vLnRoZW4odGhpcy5nZXRJbml0aWFsQ2FyZHMoKSlcbiAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKVxuICB9XG5cbiAgZGVsZXRlQ2FyZChjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9YCwge1xuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xuICAgIH0pXG4gICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSlcbiAgfVxuXG4gIGFkZExpa2UoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcbiAgICB9KVxuICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpXG4gIH1cblxuICBkZWxldGVMaWtlKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy9saWtlcy8ke2NhcmRJZH1gLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXG4gICAgfSlcbiAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKVxuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKGRhdGEsIHBvcHVwU2VsZWN0b3IsIGNhcmRPYmopIHtcbiAgICBzdXBlcihkYXRhLCBwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9zdWJ0aXRsZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IodGhpcy5fZGF0YS5wb3B1cFN1YnRpdGxlU2VsZWN0b3IpO1xuICAgIHRoaXMuX2ltYWdlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3Rvcih0aGlzLl9kYXRhLnBvcHVwSW1hZ2VJbWFnZVNlbGVjdG9yKTtcbiAgICB0aGlzLmNhcmRPYmogPSBjYXJkT2JqXG4gIH1cblxuICBvcGVuKCkge1xuICAgIHRoaXMuX3N1YnRpdGxlLnRleHRDb250ZW50ID0gdGhpcy5jYXJkT2JqLm5hbWU7XG4gICAgdGhpcy5faW1hZ2UuYWx0ID0gdGhpcy5jYXJkT2JqLm5hbWU7XG4gICAgdGhpcy5faW1hZ2Uuc3JjID0gdGhpcy5jYXJkT2JqLmxpbms7XG4gICAgc3VwZXIub3BlbigpO1xuICB9XG59XG4iXSwibmFtZXMiOlsiU2VjdGlvbiIsImNvbnN0cnVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsImNvbnRhaW5lclNlbGVjdG9yIiwidGhpcyIsIl9pdGVtcyIsIl9jb250YWluZXIiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJfcmVuZGVyZXIiLCJyZW5kZXJJdGVtcyIsInJldmVyc2UiLCJmb3JFYWNoIiwiaXRlbSIsImFkZEl0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsIkNhcmQiLCJjYXJkT2JqIiwibXlJZCIsInByb3BzIiwiaGFuZGxlQ2FyZENsaWNrIiwiaGFuZGxlRGVsZXRlIiwiaGFuZGxlTGlrZSIsIm93bmVyIiwiX2lkIiwiX215SWQiLCJsaWtlIiwibGlrZXMiLCJsZW5ndGgiLCJzb21lIiwiaGFzTGlrZSIsInZhbHVlIiwibGlrZXNOdW1iZXIiLCJ0ZXh0Q29udGVudCIsIl9jYXJkIiwicmVtb3ZlIiwiX2J1dHRvbkxpa2UiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsIl9wcm9wcyIsImJ1dHRvbkxpa2VBY3RpdmVDbGFzcyIsImFkZCIsIl90aXRsZSIsIm5hbWUiLCJfdXJsIiwibGluayIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfaGFuZGxlRGVsZXRlIiwiX2hhbmRsZUxpa2UiLCJfZ2V0VGVtcGxhdGUiLCJjYXJkVGVtcGxhdGVTZWxlY3RvciIsImNvbnRlbnQiLCJjYXJkU2VsZWN0b3IiLCJjbG9uZU5vZGUiLCJnZW5lcmF0ZUNhcmQiLCJfY2FyZFRpdGxlIiwiY2FyZFRpdGxlU2VsZWN0b3IiLCJfY2FyZEltYWdlIiwiY2FyZEltYWdlU2VsZWN0b3IiLCJfYnV0dG9uRGVsZXRlIiwiYnV0dG9uRGVsZXRlU2VsZWN0b3IiLCJidXR0b25MaWtlU2VsZWN0b3IiLCJjYXJkTGlrZXNOdW1iZXJTZWxlY3RvciIsImFsdCIsInNyYyIsImNhcmRJZCIsInVwZGF0ZUxpa2VzIiwiX2NoZWNrTGlrZXMiLCJhZGRMaWtlIiwiaXNPd25lciIsImJ1dHRvbkRlbGV0ZUFjdGl2ZUNsYXNzIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiYWRkRXZlbnRMaXN0ZW5lciIsIkZvcm1WYWxpZGF0b3IiLCJkYXRhIiwiZm9ybUVsZW1lbnRTZWxlY3RvciIsIl9mb3JtRWxlbWVudCIsIl9kYXRhIiwiX2lucHV0RWxlbWVudHMiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsIl9idXR0b25FbGVtZW50Iiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dEVsZW1lbnQiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JUZXh0IiwiZXJyb3JIaWRkZW5TZWxlY3RvciIsImlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJlcnJvckNsYXNzIiwiX2hpZGVJbnB1dEVycm9yIiwiX2NoZWNrSWZJbnZhbGlkIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfYWN0aXZhdGVCdXR0b24iLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwicmVtb3ZlQXR0cmlidXRlIiwiX2RlYWN0aXZhdGVCdXR0b24iLCJzZXRBdHRyaWJ1dGUiLCJfc2V0QnV0dG9uU3RhdGUiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRhdGVGb3JtIiwicmVzZXRWYWxpZGF0aW9uIiwiZW5hYmxlVmFsaWRhdGlvbiIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsImV2dCIsImtleSIsImNsb3NlIiwidGFyZ2V0IiwiX3BvcHVwIiwiX2J1dHRvbkNsb3NlIiwiYnV0dG9uQ2xvc2VTZWxlY3RvciIsIm9wZW4iLCJwb3B1cE9wZW5DbGFzcyIsInNldEV2ZW50TGlzdGVuZXJzIiwicmVtb3ZlRXZlbnRMaXN0ZW5lcnMiLCJfaGFuZGxlQ2xpY2tDbG9zZSIsIl9oYW5kbGVFc2NDbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlU3VibWl0Iiwic3VwZXIiLCJfZm9ybSIsImdldElucHV0VmFsdWVzIiwiX2Zvcm1WYWx1ZXMiLCJyZXNldCIsImdldEVsZW1lbnRCeUlkIiwidGhpc1BhZ2VTZXR0aW5ncyIsInBvcHVwU3VidGl0bGVTZWxlY3RvciIsInBvcHVwSW1hZ2VJbWFnZVNlbGVjdG9yIiwiY2FyZHNHYWxsZXJ5U2VsZWN0b3IiLCJ1c2VyTmFtZVNldFNlbGVjdG9yIiwidXNlckpvYlNldFNlbGVjdG9yIiwicHJvZmlsZUltYWdlU2VsZWN0b3IiLCJidXR0b25FZGl0UHJvZmlsZVNlbGVjdG9yIiwiYnV0dG9uQWRkQ2FyZFNlbGVjdG9yIiwiYXZhdGFyRWRpdEJ1dHRvblNlbGVjdG9yIiwiYnV0dG9uU3VibWl0QWxlcnRTZWxlY3RvciIsInByb2ZpbGVFZGl0U3VibWl0QnV0dG9uU2VsZWN0b3IiLCJhZGRDYXJkU3VibWl0QnV0dG9uU2VsZWN0b3IiLCJhdmF0YXJFZGl0U3VibWl0QnV0dG9uU2VsZWN0b3IiLCJwb3B1cEVkaXRQcm9maWxlU2VsZWN0b3IiLCJwb3B1cEVkaXRBdmF0YXJTZWxlY3RvciIsInBvcHVwQWRkQ2FyZFNlbGVjdG9yIiwicG9wdXBJbWFnZVNlbGVjdG9yIiwicG9wdXBBbGVydFNlbGVjdG9yIiwidXNlck5hbWVUb1NldFNlbGVjdG9yIiwidXNlckpvYlRvU2V0U2VsZWN0b3IiLCJ1c2VyQXZhdGFyVG9TZXRTZWxlY3RvciIsImZvcm1TZWxlY3RvciIsImJ1dHRvbkVkaXRQcm9maWxlIiwiYnV0dG9uQWRkQ2FyZCIsImJ1dHRvbkVkaXRBdmF0YXIiLCJwcm9maWxlTmFtZUlucHV0IiwicHJvZmlsZUpvYklucHV0IiwicHJvZmlsZUVkaXRTdWJtaXRCdXR0b24iLCJhdmF0YXJFZGl0U3VibWl0QnV0dG9uIiwiYWRkQ2FyZFN1Ym1pdEJ1dHRvbiIsInVzZXJJbmZvIiwiX25hbWUiLCJfYWJvdXQiLCJfYXZhdGFyIiwiZ2V0VXNlckluZm8iLCJfaW5mbyIsImFib3V0Iiwic2V0VXNlckluZm8iLCJhdmF0YXIiLCJzdHlsZSIsImJhY2tncm91bmRJbWFnZSIsImFwaSIsIm9wdGlvbnMiLCJfb3B0aW9ucyIsIl9iYXNlVXJsIiwiYmFzZVVybCIsIl9oZWFkZXJzIiwiaGVhZGVycyIsIl9jaGVja1Jlc3BvbnNlIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImdldFVzZXJEYXRhIiwiZmV0Y2giLCJ0aGVuIiwiZ2V0SW5pdGlhbENhcmRzIiwiZ2V0RGF0YSIsImFsbCIsInZhbHVlcyIsImVkaXRQcm9maWxlIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJlZGl0QXZhdGFyIiwidXJsIiwiYWRkQ2FyZCIsImRlbGV0ZUNhcmQiLCJkZWxldGVMaWtlIiwiYXV0aG9yaXphdGlvbiIsImNhcmRBZGRGb3JtVmFsaWRhdG9yIiwicHJvZmlsZUZvcm1WYWxpZGF0b3IiLCJhdmF0YXJGb3JtVmFsaWRhdG9yIiwidXNlckRhdGEiLCJjYXJkcyIsImNhcmRzR2FsbGVyeSIsImNyZWF0ZUNhcmQiLCJwb3B1cEFkZCIsInByZXZlbnREZWZhdWx0IiwicmVuZGVyTG9hZGluZyIsImlucHV0VmFsdWVzIiwiY2FyZCIsInRpdGxlIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwiZmluYWxseSIsInBvcHVwV2l0aEltYWdlIiwiX3N1YnRpdGxlIiwiX2ltYWdlIiwicG9wdXBBbGVydCIsIm5ld0NhcmQiLCJnZXRDYXJkSWQiLCJpc0xpa2VkIiwicmVtb3ZlTGlrZSIsInBvcHVwRWRpdFByb2ZpbGUiLCJ1c2VyT2JqIiwicG9wdXBFZGl0QXZhdGFyIiwiYXZhdGFyVXJsIiwiaXNMb2FkaW5nIiwiYnV0dG9uIl0sInNvdXJjZVJvb3QiOiIifQ==